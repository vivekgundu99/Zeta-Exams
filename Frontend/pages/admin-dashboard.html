<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Zeta Exams</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="admin-page">
    <div id="loading-spinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Admin Header -->
    <header class="admin-header">
        <div class="header-left">
            <h1>âš¡ Admin Dashboard</h1>
        </div>
        <div class="header-right">
            <span id="admin-name">Admin</span>
            <button class="btn btn-outline" onclick="logout()">Logout</button>
        </div>
    </header>

    <!-- Admin Sidebar -->
    <div class="admin-layout">
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <button class="nav-item active" data-tab="questions" onclick="switchTab('questions')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9 2C8.44772 2 8 2.44772 8 3C8 3.55228 8.44772 4 9 4H11C11.5523 4 12 3.55228 12 3C12 2.44772 11.5523 2 11 2H9ZM4 7C4 5.89543 4.89543 5 6 5H7V6C7 7.10457 7.89543 8 9 8H11C12.1046 8 13 7.10457 13 6V5H14C15.1046 5 16 5.89543 16 7V15C16 16.1046 15.1046 17 14 17H6C4.89543 17 4 16.1046 4 15V7Z"/>
                    </svg>
                    Questions
                </button>
                
                <button class="nav-item" data-tab="bulk-import" onclick="switchTab('bulk-import')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M8 2V5L3 10L8 15V18L1 11L8 2ZM12 2L19 9L12 16V13L17 8L12 3V2Z"/>
                    </svg>
                    Bulk Import
                </button>
                
                <button class="nav-item" data-tab="mock-tests" onclick="switchTab('mock-tests')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5C2 3.89543 2.89543 3 4 3H16C17.1046 3 18 3.89543 18 5V15C18 16.1046 17.1046 17 16 17H4C2.89543 17 2 16.1046 2 15V5Z"/>
                    </svg>
                    Mock Tests
                </button>
                
                <button class="nav-item" data-tab="gift-codes" onclick="switchTab('gift-codes')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 2L12.5 7L18 8L14 12L15 18L10 15L5 18L6 12L2 8L7.5 7L10 2Z"/>
                    </svg>
                    Gift Codes
                </button>
                
                <button class="nav-item" data-tab="coadmins" onclick="switchTab('coadmins')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9 6C9 7.65685 7.65685 9 6 9C4.34315 9 3 7.65685 3 6C3 4.34315 4.34315 3 6 3C7.65685 3 9 4.34315 9 6Z"/>
                        <path d="M17 6C17 7.65685 15.6569 9 14 9C12.3431 9 11 7.65685 11 6C11 4.34315 12.3431 3 14 3C15.6569 3 17 4.34315 17 6Z"/>
                        <path d="M12 11C11.4477 11 11 11.4477 11 12V17H1V12C1 11.4477 1.44772 11 2 11H12Z"/>
                        <path d="M18 11C18.5523 11 19 11.4477 19 12V17H13V12C13 11.4477 13.4477 11 14 11H18Z"/>
                    </svg>
                    Co-Admins
                </button>
                
                <button class="nav-item" data-tab="feedback" onclick="switchTab('feedback')">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M18 2H2C0.9 2 0 2.9 0 4V14C0 15.1 0.9 16 2 16H16L20 20V4C20 2.9 19.1 2 18 2Z"/>
                    </svg>
                    Feedback
                </button>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="admin-content">
            <!-- Questions Tab -->
            <div class="tab-content active" id="questions-tab">
                <div class="section-header">
                    <h2>Manage Questions</h2>
                    <button class="btn btn-primary" onclick="showAddQuestionModal()">Add Question</button>
                </div>

                <!-- Search & Filters -->
                <div class="search-filters">
                    <select id="filter-exam" onchange="adminLoadQuestions()">
                        <option value="">All Exams</option>
                        <option value="JEE">JEE</option>
                        <option value="NEET">NEET</option>
                    </select>
                    <select id="filter-subject" onchange="adminLoadQuestions()">
                        <option value="">All Subjects</option>
                    </select>
                    <input type="text" id="search-question" placeholder="Search questions..." onkeyup="adminSearchQuestions()">
                </div>

                <!-- Questions List -->
                <div id="questions-list" class="data-table"></div>
            </div>

            <!-- Bulk Import Tab -->
            <div class="tab-content" id="bulk-import-tab">
                <div class="section-header">
                    <h2>Bulk Import Questions</h2>
                    <p class="text-muted">Upload questions via CSV format</p>
                </div>

                <div class="import-card">
                    <h3>CSV Format Guide</h3>
                    <pre class="code-block">
MCQ Format:
1#Question text#image_url#Option A#none#Option B#none#Option C#none#Option D#none#A#Topic

Numerical Format:
2#Question text#image_url########12.5#Topic
                    </pre>

                    <div class="form-group">
                        <label>Select Exam</label>
                        <select id="import-exam">
                            <option value="JEE">JEE</option>
                            <option value="NEET">NEET</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Select Subject</label>
                        <input type="text" id="import-subject" placeholder="e.g., Physics">
                    </div>

                    <div class="form-group">
                        <label>Select Chapter</label>
                        <input type="text" id="import-chapter" placeholder="e.g., Kinematics">
                    </div>

                    <div class="form-group">
                        <label>Paste CSV Data</label>
                        <textarea id="import-csv" rows="10" placeholder="Paste your CSV data here..."></textarea>
                    </div>

                    <button class="btn btn-primary btn-block" onclick="bulkImportQuestions()">
                        Import Questions
                    </button>
                </div>
            </div>

            <!-- Gift Codes Tab -->
            <div class="tab-content" id="gift-codes-tab">
                <div class="section-header">
                    <h2>Generate Gift Codes</h2>
                </div>

                <div class="gift-code-generator">
                    <div class="form-group">
                        <label>Number of Codes</label>
                        <input type="number" id="gift-count" min="1" max="100" value="10">
                    </div>

                    <div class="form-group">
                        <label>Duration</label>
                        <select id="gift-duration">
                            <option value="1M">1 Month</option>
                            <option value="6M">6 Months</option>
                            <option value="1Y">1 Year</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="generateGiftCodes()">
                        Generate Codes
                    </button>

                    <div id="gift-codes-result" class="gift-codes-list"></div>
                </div>
            </div>

            <!-- Co-Admins Tab -->
            <div class="tab-content" id="coadmins-tab">
                <div class="section-header">
                    <h2>Co-Admins</h2>
                    <button class="btn btn-primary" onclick="showAddCoAdminModal()">Add Co-Admin</button>
                </div>

                <div id="coadmins-list" class="data-table"></div>
            </div>

            <!-- Feedback Tab -->
            <div class="tab-content" id="feedback-tab">
                <div class="section-header">
                    <h2>User Feedback</h2>
                    <button class="btn btn-outline" onclick="exportRefunds()">Export Refund Requests</button>
                </div>

                <div class="feedback-filters">
                    <select id="feedback-filter" onchange="filterFeedback()">
                        <option value="all">All Feedback</option>
                        <option value="refund">Refund Requests</option>
                        <option value="query">General Queries</option>
                    </select>
                </div>

                <div id="feedback-list" class="data-table"></div>
            </div>
        </main>
    </div>

    <script src="../js/api.js"></script>
    <script src="../js/admin.js"></script>
</body>
</html>